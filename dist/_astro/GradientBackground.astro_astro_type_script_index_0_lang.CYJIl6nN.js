import{g}from"./index.CB87Sc6I.js";import{b as C}from"./observers.Dgr47LCW.js";const i=[],y=[];function I(n){const e=n.onVisibilityChange;n.onVisibilityChange=o=>{e&&e.call(n,o),o.forEach(t=>{const s=t.target;if(t.isIntersecting)i.push(s);else{const r=i.indexOf(s);r>-1&&i.splice(r,1)}})},C(n)}g.ticker.add(E);g.ticker.lagSmoothing(0);function E(n){for(const e of y)e(n);for(const e of i)e.tick.call(e,n)}class S extends HTMLElement{step=0;colorIndices=[0,1,2,3];gradientSpeed=.002;colors=[];constructor(){super(),this.loadColors(),I(this)}connectedCallback(){new MutationObserver(()=>this.loadColors()).observe(document.documentElement,{attributes:!0,attributeFilter:["data-theme"]})}loadColors(){const e=getComputedStyle(document.documentElement);this.colors=["--gradient-1","--gradient-2","--gradient-3","--gradient-4"].map(o=>{const t=e.getPropertyValue(o).trim();return t?t.split(/\s+/).map(Number):[128,128,128]})}tick(e){if(this.colors.length<4)return;const o=this.colors,t=this.colorIndices,s=this.step,r=o[t[0]],a=o[t[1]],l=o[t[2]],d=o[t[3]],c=1-s,u=Math.round(c*r[0]+s*a[0]),m=Math.round(c*r[1]+s*a[1]),f=Math.round(c*r[2]+s*a[2]),p="rgb("+u+","+m+","+f+")",b=Math.round(c*l[0]+s*d[0]),M=Math.round(c*l[1]+s*d[1]),k=Math.round(c*l[2]+s*d[2]),v="rgb("+b+","+M+","+k+")";if(this.style.backgroundImage=`linear-gradient(${Math.round(90+Math.cos(e/1e4)*10*100/100)}deg, ${p} 0%, ${v} 100%)`,this.step+=this.gradientSpeed,this.step>=1){this.step%=1,t[0]=t[1],t[2]=t[3];const h=Math.random();t[1]=(t[1]+Math.floor(1+h*(o.length-1)))%o.length,t[3]=(t[3]+Math.floor(1+(Math.random()+h)*(o.length-1)))%o.length}}}customElements.define("sy-gradient-bg",S);
