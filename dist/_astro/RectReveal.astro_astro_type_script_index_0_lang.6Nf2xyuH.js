import{g as m}from"./index.CB87Sc6I.js";import{S}from"./ScrollTrigger.Cv03IO65.js";m.registerPlugin(S);function P(x,p,o,n){const d=[{x:-.5,y:-.5},{x:.5,y:-.5},{x:.5,y:.5},{x:-.5,y:.5}],g={x:50,y:50};let e=x*Math.PI/180,s=Math.cos(e),a=Math.sin(e),t=p*(o<n?o/100:n/100),i=t;return d.map(c=>{let l=c.x*t,r=c.y*i,h=l*s-r*a,y=l*a+r*s;return{x:g.x+h/o*100,y:g.y+y/n*100}})}class z extends HTMLElement{connectedCallback(){const p=this.dataset.ignoreLast==="true",o=this.querySelector(".inner"),n=35,d=n*Math.PI/180,g=Math.abs(Math.cos(d))+Math.abs(Math.sin(d)),e=this.querySelectorAll(".inner > *"),s=[0,0];e.forEach(t=>{t.classList.add("col-start-1","row-start-1","sticky","top-0","h-screen"),t.style.willChange="clip-path"});const a=m.timeline({scrollTrigger:{trigger:o,scrub:!0,start:"top top",end:()=>`+=${window.innerHeight*1.5}`,invalidateOnRefresh:!0,onRefresh:()=>{s[0]=window.innerWidth,s[1]=window.innerHeight}}});e.forEach((t,i)=>{const c={p:0};m.set(t,{zIndex:e.length-i}),a.add(()=>{},i===0?0:">-0.3"),!(p&&i===e.length-1)&&a.fromTo(c,{p:0},{p:1,onUpdate:()=>{const l=c.p,[r,h]=s,y=n+l*75,u=Math.max(r,h)*g/Math.min(r,h)*100,M=u-l*u,w=P(y,M,r,h).map(f=>`${f.x}% ${f.y}%`).join(", ");t.style.clipPath=`polygon(${w})`}})})}}customElements.define("sy-rect-reveal",z);
